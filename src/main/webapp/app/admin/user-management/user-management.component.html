<mat-card>
    <div class="float-right">
        <button mat-raised-button class="jh-create-entity" [routerLink]="['./new']">
            <fa-icon icon="plus"></fa-icon> <span jhiTranslate="userManagement.home.createLabel">Create a new User</span>
        </button>
        <button mat-raised-button (click)="deleteSelectedUsers()"
                [disabled]="isDeleteButtonDisabled()">
            <fa-icon icon="times"></fa-icon>
            <span class="d-none d-md-inline" jhiTranslate="entity.action.delete">Delete</span>
        </button>
    </div>
    <mat-card-header>
        <mat-card-title>
            <span id="user-management-page-heading" jhiTranslate="userManagement.home.title">Users</span>
        </mat-card-title>

        <jhi-alert-error></jhi-alert-error>

        <jhi-alert></jhi-alert>
    </mat-card-header>
    <mat-card-content>
<!--        <div class="loading-shade"-->
<!--             *ngIf="isLoadingResults">-->
<!--            <mat-spinner *ngIf="isLoadingResults"></mat-spinner>-->
<!--        </div>-->
        <div class="mat-elevation-z8">
            <table mat-table matSort [dataSource]="users" matSortActive="id" matSortDisableClear matSortDirection="asc" (matSortChange)="loadAll()">
                <ng-container matColumnDef="select">
                    <th mat-header-cell *matHeaderCellDef>
                        <mat-checkbox (change)="$event ? masterToggle() : null"
                                      [checked]="selection.hasValue() && isAllSelected()"
                                      [indeterminate]="selection.hasValue() && !isAllSelected()">
                        </mat-checkbox>
                    </th>
                    <td mat-cell *matCellDef="let row">
                        <mat-checkbox (click)="$event.stopPropagation()"
                                      (change)="$event ? selection.toggle(row) : null"
                                      [checked]="selection.isSelected(row)">
                        </mat-checkbox>
                    </td>
                </ng-container>
                <ng-container matColumnDef="id">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>
                        <span jhiTranslate="global.field.id">ID</span>
                    </th>
                    <td mat-cell *matCellDef="let user"> <a [routerLink]="['./', user.login, 'view']">{{ user.id }}</a> </td>
                </ng-container>
                <ng-container matColumnDef="login">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>
                        <span jhiTranslate="userManagement.login">Login</span>
                    </th>
                    <td mat-cell *matCellDef="let user">{{ user.login }}</td>
                </ng-container>
                <ng-container matColumnDef="email">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>
                        <span jhiTranslate="userManagement.email">Email</span>
                    </th>
                    <td mat-cell *matCellDef="let user">{{ user.email }}</td>
                </ng-container>
                <ng-container matColumnDef="activated">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>
                        <span jhiTranslate="userManagement.activated">Active</span>
                    </th>
                    <td mat-cell *matCellDef="let user">
                        <mat-slide-toggle (click)="setActive($event, user, !user.activated)" [checked]="user.activated" [disabled]="!currentAccount || currentAccount.login === user.login"></mat-slide-toggle>
                    </td>
                </ng-container>
                <ng-container matColumnDef="langKey">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>
                        <span jhiTranslate="userManagement.langKey">Lang Key</span>
                    </th>
                    <td mat-cell *matCellDef="let user">{{ user.langKey }}</td>
                </ng-container>
                <ng-container matColumnDef="profiles">
                    <th mat-header-cell *matHeaderCellDef>
                        <span jhiTranslate="userManagement.profiles">Profiles</span>
                    </th>
                    <td mat-cell *matCellDef="let user">
                        <mat-chip-list>
                            <mat-chip *ngFor="let authority of user.authorities" selected>
                                {{authority}}
                            </mat-chip>
                        </mat-chip-list>
                    </td>
                </ng-container>
                <ng-container matColumnDef="createdDate">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>
                        <span jhiTranslate="userManagement.createdDate">Created Date</span>
                    </th>
                    <td mat-cell *matCellDef="let user">{{ user.createdDate | date:'dd/MM/yy HH:mm' }}</td>
                </ng-container>
                <ng-container matColumnDef="lastModifiedBy">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>
                        <span jhiTranslate="userManagement.lastModifiedBy">Last Modified By</span>
                    </th>
                    <td mat-cell *matCellDef="let user">{{ user.lastModifiedBy }}</td>
                </ng-container>
                <ng-container matColumnDef="lastModifiedDate">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>
                        <span jhiTranslate="userManagement.lastModifiedDate">Last Modified Date</span>
                    </th>
                    <td mat-cell *matCellDef="let user">{{ user.lastModifiedDate | date:'dd/MM/yy HH:mm' }}</td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;" [routerLink]="['./', row.login, 'edit']"></tr>
            </table>
            <mat-paginator [length]="totalItems" [pageSize]="itemsPerPage" (page)="loadAll()"></mat-paginator>
        </div>
    </mat-card-content>
</mat-card>
